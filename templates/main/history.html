{% extends 'main/base.html' %}
{% block navbar %}
<form onsubmit="event.preventDefault();">
<a href="/home/" class="nav-item nav-link "><i class="fa fa-tachometer-alt me-2"></i>Connection</a>
<a href="/queryhelper/" class="nav-item nav-link"><i class="fa fa-th me-2"></i>query helper</a>
<a href="/visualization/" class="nav-item nav-link"><i class="fa fa-chart-bar me-2"></i>visualization</a>
<a href="/history/" class="nav-item nav-link active"><i class="fa fa-table me-2"></i>History</a>
<!--<a href="/how_to_use/" class="nav-item nav-link"><i class="fa fa-keyboard me-2"></i>how to use</a>-->
</form>
{% endblock %}
{% block content %}
{% if history_records %}
    <ul>
        
        <div class="container-fluid pt-4 px-4">
            <div class="row g-4">
                <div class="col-sm-12 ">
                    <div class="bg-light rounded h-100 p-4">
                      <div class="accordion" id="accordionExample">
                        {% for record in history_records %}
                        <div class="accordion-item">
                          <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                              {{record.timestamp}}
                            </button>
                          </h2>
                          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                              <div class="alert alert-primary" role="alert">
                                <code class="text-dark text-wrap ">{{record.user_query}}</code>
                            </div>
                            <div class="alert alert-success" role="alert">
                              <code class="text-dark text-wrap ">{{record.generates_sql}}</code>
                          </div>
                               
                            </div>
                          </div>
                        </div>
                        {% endfor %}
                      </div>
                    </div>
                </div>
            </div>
        </div>
        
    </ul>
{% else %}
    <p>No history available.</p>
{% endif %}

{% endblock %}